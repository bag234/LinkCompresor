<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Переадресация...</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    :root {
      --primary: #4361ee;
      --secondary: #7209b7;
      --primary-dark: #2a3bb5;
      --dark: #0f172a;
      --gray: #94a3b8;
      --border-radius: 14px;
      --transition: 0.3s ease;
    }

    body {
      margin: 0;
      font-family: 'Inter', sans-serif;
      background: var(--dark);
      color: #fff;
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
      text-align: center;
      padding: 20px;
      overflow: hidden;
    }

    /* Canvas для частиц */
    #particles {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
    }

    .redirect-box {
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: var(--border-radius);
      padding: 40px 30px;
      max-width: 500px;
      width: 100%;
      backdrop-filter: blur(10px);
      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.4);
      animation: fadeIn 1s ease forwards;
      position: relative;
      z-index: 1;
    }

    .redirect-box h1 {
      font-size: 1.8rem;
      margin-bottom: 15px;
      font-weight: 600;
      line-height: 1.4;
    }

    #countdown {
      font-weight: 700;
      font-size: 2rem;
      color: var(--primary);
    }

    #wait-text {
      font-size: 1rem;
      color: var(--gray);
      margin: 15px 0 25px;
    }

    .buttons {
      display: flex;
      justify-content: center;
      gap: 15px;
      flex-wrap: wrap;
    }

    .redirect-button,
    .home-button,
    .back-button {
      background: linear-gradient(to right, var(--primary), var(--secondary));
      color: white;
      padding: 14px 26px;
      border: none;
      border-radius: var(--border-radius);
      cursor: pointer;
      font-size: 16px;
      font-weight: 600;
      transition: var(--transition);
      letter-spacing: 0.5px;
    }

    .redirect-button,
    .home-button {
      display: none;
    }

    .redirect-button:hover,
    .home-button:hover,
    .back-button:hover {
      background: linear-gradient(to right, var(--primary-dark), #6509a5);
      transform: translateY(-3px);
      box-shadow: 0 10px 25px rgba(67, 97, 238, 0.4);
    }

    .redirect-button:active,
    .home-button:active,
    .back-button:active {
      transform: translateY(0);
    }

    .banner-left, .banner-right {
  position: fixed;
  top: 50%;
  transform: translateY(-50%);
  width: 160px;
  height: 600px;
  z-index: 9999;
}

.banner-left {
  left: 10px;
}

.banner-right {
  right: 10px;
}
@media (max-width: 1024px) {
  .banner-left, .banner-right {
    display: none;
  }
}

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body>
  <canvas id="particles"></canvas>

  <div class="redirect-box">
    <h1><span th:text="#{redirect.header}">Вы будете перенаправлены через </span> <span id="countdown">10</span> <span th:text="#{redirect.header.seconds}">секунд...</span></h1>
    <p id="wait-text" th:text="#{redirect.wait}">Пожалуйста, подождите...</p>
    <script type="text/javascript">
	atOptions = {
		'key' : '1446b0cc2ac2c82e4092e9252bce8d51',
		'format' : 'iframe',
		'height' : 250,
		'width' : 300,
		'params' : {}
	};
</script>
<script type="text/javascript" src="//www.highperformanceformat.com/1446b0cc2ac2c82e4092e9252bce8d51/invoke.js"></script>
    <div class="buttons">
      <button id="redirectBtn" class="redirect-button" th:text="#{redirect.go}">Перейти сейчас</button>
      <button id="backBtn" class="back-button" th:text="#{redirect.back}" onclick="window.location.href='index.html'">Вернуться назад</button>
    </div>
  </div>

  <div class="banner-left">
  <script type="text/javascript">
    atOptions = {
      'key' : '4ba6d68c42287f469036e08f7a649cab',
      'format' : 'iframe',
      'height' : 600,
      'width' : 160,
      'params' : {}
    };
  </script>
  <script type="text/javascript" src="//www.highperformanceformat.com/4ba6d68c42287f469036e08f7a649cab/invoke.js"></script>
</div>

<!-- Правый баннер -->
<div class="banner-right">
  <script type="text/javascript">
	atOptions = {
		'key' : 'd38dbae1683832c938e829b19146d82e',
		'format' : 'iframe',
		'height' : 300,
		'width' : 160,
		'params' : {}
	};
</script>
<script type="text/javascript" src="//www.highperformanceformat.com/d38dbae1683832c938e829b19146d82e/invoke.js"></script>
</div>
  
  <script th:inline="javascript">
    /*<![CDATA[*/
    let countdown = 10;
    const countdownEl = document.getElementById('countdown');
    const redirectBtn = document.getElementById('redirectBtn');
    const backBtn = document.getElementById('backBtn');
    const waitText = document.getElementById('wait-text');

    const redirectUrl = [[${Link.link}]];
    const waitFallBack = [[#{redirect.fallback}]];
    const homeUrl = "";

    const timer = setInterval(() => {
      countdown--;
      countdownEl.textContent = countdown;

      if (countdown <= 0) {
        clearInterval(timer);

        redirectBtn.style.display = 'inline-block';
        waitText.textContent = waitFallBack;

        window.location.href = redirectUrl;
      }
    }, 1000);

    redirectBtn.addEventListener('click', () => {
      window.location.href = redirectUrl;
    });


    backBtn.addEventListener('click', () => {
      window.history.back();
    });
    /*]]>*/
  </script>

  <script>
    const canvas = document.getElementById('particles');
    const ctx = canvas.getContext('2d');

    function resizeCanvas() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    }

    resizeCanvas();
    window.addEventListener('resize', resizeCanvas);

    const particles = [];
    const particleCount = 70;

    for (let i = 0; i < particleCount; i++) {
      particles.push({
        x: Math.random() * canvas.width,
        y: Math.random() * canvas.height,
        radius: Math.random() * 3 + 1,
        speed: Math.random() * 1.5 + 0.5,
        direction: Math.random() * Math.PI * 2,
      });
    }

    function animate() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.strokeStyle = 'rgba(255, 255, 255, 0.08)';
      ctx.lineWidth = 1;

      for (let i = 0; i < particles.length; i++) {
        for (let j = i + 1; j < particles.length; j++) {
          const dx = particles[i].x - particles[j].x;
          const dy = particles[i].y - particles[j].y;
          const distance = Math.sqrt(dx * dx + dy * dy);

          if (distance < 120) {
            ctx.beginPath();
            ctx.moveTo(particles[i].x, particles[i].y);
            ctx.lineTo(particles[j].x, particles[j].y);
            ctx.stroke();
          }
        }
      }
      particles.forEach(particle => {
        particle.x += Math.cos(particle.direction) * particle.speed;
        particle.y += Math.sin(particle.direction) * particle.speed;

        if (particle.x < 0 || particle.x > canvas.width) {
          particle.direction = Math.PI - particle.direction;
        }
        if (particle.y < 0 || particle.y > canvas.height) {
          particle.direction = -particle.direction;
        }

        ctx.beginPath();
        ctx.arc(particle.x, particle.y, particle.radius, 0, Math.PI * 2);
        ctx.fillStyle = "rgba(255,255,255,0.8)";
        ctx.fill();
      });

      requestAnimationFrame(animate);
    }

    animate();
  </script>
</body>
</html>
